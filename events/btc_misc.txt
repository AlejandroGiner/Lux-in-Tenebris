namespace = btc_misc

#Conquest of Constantinople
country_event = {
	id = btc_misc.1
	title = "btc_misc.1.t"
	desc = "btc_misc.1.d"
	picture = NOT_DISCIPLINED_SOLDIERS_eventPicture

	major = yes
	fire_only_once = yes
	trigger = {
		151 = { NOT = { owned_by = BYZ } }
		current_age = age_of_discovery
		owns_or_non_sovereign_subject_of = 151
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "btc_misc.1.a"
		add_prestige = 5
	}
}

#Richard Neville England
country_event = {
	id = btc_misc.2
	title = btc_misc.2.t
	desc = btc_misc.2.d
	picture = DIPLOMACY_eventPicture

	fire_only_once = yes
	
	trigger = {
		tag = ENG
		is_year = 1444
		NOT = {
			is_year = 1472
		}
	}
	
	mean_time_to_happen = {
		months = 167
	}
	
	option = { #Invite him to court
		name = btc_misc.2.a
		ai_chance = {
			factor = 30
		}
		define_advisor = {
			type = commandant
			culture = english
			skill = 2
			name = "Richard Neville"
			cost_multiplier = 0.6
		}
	}
	option = { #Make him commander
		name = btc_misc.2.b
		ai_chance = {
			factor = 70
		}
		define_general = {
			name = "Richard Neville"
			shock = 3
			fire = 3
			manuever = 3
			siege = 0
		}
	}
}

#Aalst printer
province_event = {
	id = btc_misc.3
	title = "btc_misc.3.t"
	desc = "btc_misc.3.d"
	picture = PRINTING_PRESS_eventPicture

	fire_only_once = yes
 
	trigger = {
		province_id = 7596
		is_state = yes
		renaissance = 100
		owner = { has_institution = renaissance }
		is_year = 1470
		NOT = { devastation = 1 }
	}

	mean_time_to_happen = {
		years = 10
	}

	option = {
		name = "btc_misc.3.a"
		ai_chance = { factor = 1 }
		owner = { add_prestige = 5 }
		add_base_production = 1
		change_trade_goods = paper
	}
}

#Barbarossa Ottomans
country_event = {
	id = btc_misc.4
	title = btc_misc.4.t
	desc = btc_misc.4.d
	picture = BARBARY_PIRATES_eventPicture

	fire_only_once = yes
	
	trigger = {
		tag = TUR
		is_year = 1500
		NOT = {
			is_year = 1550
		}
	}
	
	mean_time_to_happen = {
		years = 5
	}
	
	option = { #Invite him to court
		name = btc_misc.4.a
		ai_chance = {
			factor = 10
		}
		define_advisor = {
			type = naval_reformer
			culture = turkish
			skill = 3
			name = "Hayreddin Barbarossa"
			cost_multiplier = 0.75
		}
	}
	option = { #Make him Grand Admiral
		name = btc_misc.4.b
		ai_chance = {
			factor = 90
		}
		add_country_modifier = {
			name = btc_barbarossa_supremacy
			duration = 7300
		}
		define_admiral = {
			name = "Hayreddin Barbarossa"
			shock = 4
			fire = 4
			manuever = 4
			siege = 2
		}
	}
}

#Siege defended with bees
#ROOT = attacker
country_event = {
	id = btc_misc.5
	title = btc_misc.5.t
	desc = btc_misc.5.d
	picture = SIEGE_eventPicture #placeholder
  
	trigger = {
		any_known_country = {
			war_with = ROOT
			any_owned_province = {
				sieged_by = ROOT
				fort_level = 1
				trade_goods = apiculture
			}
		}
	}
  
	mean_time_to_happen = {
		years = 50
	}

	immediate = {
		hidden_effect = {
			random_known_country = {
				limit = {
					war_with = ROOT
					any_owned_province = {
						sieged_by = ROOT
						fort_level = 1
						trade_goods = apiculture
					}
				}
				save_event_target_as = bee_defender
				random_owned_province = {
					limit = {
						sieged_by = ROOT
						fort_level = 1
						trade_goods = apiculture
					}
					save_global_event_target_as = bee_province
				}
			}
		}
	}
  
	option = {
		name = btc_misc.5.a
		event_target:bee_province = {
			change_siege = -2
			kill_units = {
				who = ROOT
				amount = 1
			}
		}
		hidden_effect = {
			event_target:bee_defender = {
				country_event = {
					id = btc_misc.7
				}
			}
		}
	}
}

#Siege attacked with bees
#ROOT = attacker
country_event = {
	id = btc_misc.6
	title = btc_misc.5.t
	desc = btc_misc.6.d
	picture = SIEGE_eventPicture #placeholder
  
	trigger = {
		any_known_country = {
			war_with = ROOT
			any_owned_province = {
				sieged_by = ROOT
				fort_level = 1
				trade_goods = apiculture
			}
		}
	}
  
	mean_time_to_happen = {
		years = 50
	}

	immediate = {
		hidden_effect = {
			random_known_country = {
				limit = {
					war_with = ROOT
					any_owned_province = {
						sieged_by = ROOT
						fort_level = 1
						trade_goods = apiculture
					}
				}
				save_event_target_as = bee_defender
				random_owned_province = {
					limit = {
						sieged_by = ROOT
						fort_level = 1
						trade_goods = apiculture
					}
					save_global_event_target_as = bee_province
				}
			}
		}
	}
  
	option = {
		name = btc_misc.6.a
		event_target:bee_province = {
			change_siege = 1
			add_province_modifier = {
				name = btc_bees_help_siege
				duration = 365
			}
		}
		hidden_effect = {
			event_target:bee_defender = {
				country_event = {
					id = btc_misc.8
				}
			}
		}
	}
}

country_event = {
	id = btc_misc.7
	title = btc_misc.5.t
	desc = btc_misc.7.d
	picture = SIEGE_eventPicture #placeholder
	
	is_triggered_only = yes
	
	option = {
		name = btc_misc.6.a
		tooltip = {
			event_target:bee_province = {
				change_siege = -2
				kill_units = {
					who = FROM
					amount = 1
				}
			}
		}
	}
}

country_event = {
	id = btc_misc.8
	title = btc_misc.5.t
	desc = btc_misc.8.d
	picture = SIEGE_eventPicture #placeholder
	
	is_triggered_only = yes
	
	option = {
		name = btc_misc.5.a
		tooltip = {
			event_target:bee_province = {
				change_siege = 1
				add_province_modifier = {
					name = btc_bees_help_siege
					duration = 365
				}
			}
		}
	}
}

#Orban engineer (?-1453) event chain for Byzantium and Ottomans, written by Pitirr. He first proposes his services to Byzantine emperor, but AI will rarely accept
#because price to hire is high. If declined, similar event happens to the Ottomans, who will always accept, no matter the funds.
#Gives an arty stack to respective country and some bonus to sieging, since such superguns weren't common and should have the special feeling of having bigass cannon
#based on Cristopher columbus event chain from flavor_por and flavor_spa

country_event = {
	id = btc_misc.9
	title = btc_misc.9.t
	desc = btc_misc.9.d
	picture = WESTERNISATION_eventPicture

	fire_only_once = yes

	trigger = {
		tag = BYZ
		NOT = { is_year = 1475 }
	}

	mean_time_to_happen = {
		months = 96 # 1452
		modifier = {
			factor = 0.8
			is_at_war = no
		}
		modifier = {
			factor = 0.7
			has_idea_group = defensive_ideas
		}
		modifier = {
			factor = 0.5
			years_of_income = 1
		}
	}

	option = {		# Hire orban
		name = btc_misc.9.a
		ai_chance = {
			factor = 75 # will have 75% chance to pick only if it has 1.5 of its yearly income in treasury
			modifier = {
				factor = 0
				NOT = { years_of_income = 1.5 }
			}
		}
		add_years_of_income = -1.5
		capital_scope = {
			ROOT = {
				bombard = PREV
			}
		}
	}
	
	option = {		# Reject his proposal
		name = btc_misc.9.b
		ai_chance = {
			factor = 25
		}
		if = {
			limit = {
				exists = TUR
			}
			TUR = {
				country_event = { id = btc_misc.10 days = 15 }
			}
		}
	}
}

country_event = {
	id = btc_misc.10
	title = btc_misc.10.t
	desc = btc_misc.10.d
	picture = WESTERNISATION_eventPicture

	is_triggered_only = yes

	option = {		# Hire Orban
		name = btc_misc.10.a
		ai_chance = { factor = 90 }
		add_years_of_income = -0.25
		capital_scope = {
			ROOT = {
				bombard = PREV
				}
		}
	}
	
	option = {		# Reject his proposal
		name = btc_misc.10.b
		ai_chance = { factor = 10 }
	}
}

#Edict of Moulins
country_event = {
	id = btc_misc.11
	title = btc_misc.11.t
	desc = btc_misc.11.d
	picture = REFORM_eventPicture
	
	fire_only_once = yes
	major = yes
	
	trigger = {
		tag = FRA
		is_year = 1550
		has_reform = french_crown
		adm = 4
	}
	
	mean_time_to_happen = {
		months = 60
	}
	
	option = {
		name = btc_misc.11.a
		ai_chance = { factor = 90 }
		
		add_government_reform = french_monarchy
		
		every_subject_country = {
			limit = {
				capital_scope = { region = france_region }
			}
			ROOT = { inherit = PREV }
		}
		
		add_country_modifier = {
			name = btc_no_apanage_system
			duration = 3650
		}
		
		if = {
			limit = { owns_or_non_sovereign_subject_of = 199 }
			199 = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		if = {
			limit = { owns_or_non_sovereign_subject_of = 184 }
			184 = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		if = {
			limit = { owns_or_non_sovereign_subject_of = 1879 }
			1879 = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		if = {
			limit = { owns_or_non_sovereign_subject_of = 175 }
			175 = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		if = {
			limit = { owns_or_non_sovereign_subject_of = 190 }
			190 = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
	}
	
	option = {
		name = btc_misc.11.b
		ai_chance = { factor = 10 }

		every_subject_country = {
			limit = { capital_scope = { region = france_region } }
			add_country_modifier = {
				name = btc_apanages_ld
				duration = 36500
			}
		}
		add_country_modifier = {
			name = btc_keep_apanage_system
			duration = 3650
		}
		poitou_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		brittany_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		lower_brittany_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		normandy_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		west_normandy_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		massif_central_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		west_massif_central_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		loire_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		anjou_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		guyenne_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		pyrenees_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 30
		}
		add_prestige = -10
	}
}

#Miguel Serveto
country_event = {
	id = btc_misc.12
	title = btc_misc.12.t
	desc = btc_misc.12.d
	picture = ENLIGHTENMENT_eventPicture

	fire_only_once = yes
	major = yes
	
	trigger = {
		OR = {
			culture_group = iberian
			culture_group = french
		}
		religion = catholic
		current_age = age_of_reformation
		is_year = 1520
		NOT = {
			is_year = 1560
		}
	}
	
	mean_time_to_happen = {
		years = 5
	}
	
	option = { #Condemn him
		name = btc_misc.12.a
		add_papal_influence = 10
		add_prestige = 5
		PAP = { add_opinion = { who = ROOT modifier = opinion_loyal_to_pope } }
	}
	option = { #Burn him at the stake
		name = btc_misc.12.b
		trigger = {
			OR = {
				ruler_has_personality = cruel_personality
				ruler_has_personality = zealot_personality
				ruler_has_personality = malevolent_personality
			}
		}
		highlight = yes
		required_personality = cruel_personality
		required_personality = zealot_personality
		required_personality = malevolent_personality
		ai_chance = {
			factor = 100
		}
		add_papal_influence = 30
		add_prestige = 15
		PAP = { add_opinion = { who = ROOT modifier = opinion_loyal_to_pope } }
		add_country_modifier = {
			name = "suppress_free_thinkers"
			duration = 1825
		}
	}
	option = { #Is it really *that* bad?
		name = btc_misc.12.c
		trigger = {
			OR = {
				ruler_has_personality = sinner_personality
				ruler_has_personality = benevolent_personality
				ruler_has_personality = free_thinker_personality
				ruler_has_personality = tolerant_personality
				ruler_has_personality = scholar_personality
			}
		}
		highlight = yes
		required_personality = sinner_personality
		required_personality = benevolent_personality
		required_personality = free_thinker_personality
		required_personality = tolerant_personality
		required_personality = scholar_personality
		ai_chance = {
			factor = 100
		}
		add_papal_influence = -10
		add_prestige = 5
		PAP = { add_opinion = { who = ROOT modifier = opinion_pope_religious_tolerance } }
		define_advisor = {
			type = theologian
			culture = aragonese
			religion = protestant
			skill = 3
			name = "Miguel Serveto"
			cost_multiplier = 0.7
		}
	}
}

#Diego Velázquez
country_event = {
	id = btc_misc.13
	title = "btc_misc.13.t"
	desc = "btc_misc.13.d"
	picture = PAINTER_ARTIST_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			AND = {
				tag = CAS
				NOT = { exists = SPA }
			}
			tag = SPA
		}
		current_age = age_of_absolutism
	}

	mean_time_to_happen = {
		years = 15
	}
	
	option = {		# Excellent
		name = "EXCELLENT"
		add_prestige = 10
		if = {
			limit = { owns = 217 }
			define_advisor = {
				type = artist
				name = "Diego Velázquez"
				culture = andalucian
				discount = yes
				skill = 5
				cost_multiplier = 0.6
				location = 217
			}
		}
		else = {
			define_advisor = {
				type = artist
				name = "Diego Velázquez"
				culture = andalucian
				discount = yes
				skill = 5
				cost_multiplier = 0.6
			}
		}
	}
}

#Bartolomé Esteban Murillo
country_event = {
	id = btc_misc.14
	title = "btc_misc.14.t"
	desc = "btc_misc.14.d"
	picture = PAINTER_ARTIST_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			AND = {
				tag = CAS
				NOT = { exists = SPA }
			}
			tag = SPA
		}
		is_year = 1620
		NOT = { is_year = 1690 }
	}

	mean_time_to_happen = {
		years = 15
	}
	
	option = {		# Excellent
		name = "EXCELLENT"
		add_prestige = 5
		if = {
			limit = { owns = 224 }
			define_advisor = {
				type = artist
				name = "Bartolomé Murillo"
				culture = andalucian
				skill = 2
				cost_multiplier = 0.7
				location = 224
			}
		}
		else = {
			define_advisor = {
				type = artist
				name = "Bartolomé Murillo"
				culture = andalucian
				skill = 2
				cost_multiplier = 0.7
			}
		}
	}
}