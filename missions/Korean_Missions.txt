korea_nomad_group = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	kor_conquer_changbai = {
		icon = mission_unite_home_region
		required_missions = { }
		position = 1
		
		ai_weight = {
			factor = 0.75
		}
		ai_priority = {
			factor = 0.75
		}
		
		provinces_to_highlight = {
			province_id = 4201
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		
		trigger = {
			4201 = {
				owned_by = ROOT
				is_core = ROOT
			}
		}
		
		effect = {
			add_legitimacy = 5
		
			ningguta_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			jilin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			liaoning_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			furdan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	kor_seize_southern_manchuria = {
		icon = mission_manchu_warrior
		required_missions = { kor_conquer_changbai }
		position = 3
		
		ai_weight = {
			factor = 0.5
		}
		ai_priority = {
			factor = 0.5
		}
		
		provinces_to_highlight = {
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						OR = {
							area = ningguta_area
							area = jilin_area
							area = liaoning_area
							area = furdan_area
						}
						value = 7
					}
				}
			}
			OR = {
				area = ningguta_area
				area = jilin_area
				area = liaoning_area
				area = furdan_area
			}
			NOT = { owned_by = ROOT }
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = kor_manchu_borderlands_tooltip
				num_of_owned_provinces_with = {
					OR = {
						area = ningguta_area
						area = jilin_area
						area = liaoning_area
						area = furdan_area
					}
					value = 10
				}
			}
		}
		
		effect = {
			add_adm_power = 50
			
			hebei_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_hebei_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			shandong_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_shandong_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	goguryeo_restoration = {
		icon = mission_conquer_50_development
		required_missions = { kor_seize_southern_manchuria }
		position = 4
		
		provinces_to_highlight = {
			OR = {
				area = ningguta_area
				area = jilin_area
				area = liaoning_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		
		trigger = { 
			ningguta_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			jilin_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			liaoning_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		
		effect = {
			korea_region = {
				limit = {
					owned_by = ROOT
				}
				add_province_modifier = {
					name = "three_koreas_mod"
					duration = 18250
				}
			}
			manchuria_region = {
				limit = {
					owned_by = ROOT
					NOT = { culture = korean }
				}
				add_province_modifier = {
					name = "kor_manchurian_korea"
					duration = 18250
				}
			}
			manchuria_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	kor_end_manchuria = {
		icon = mission_steppe_warriors
		required_missions = { goguryeo_restoration }
		position = 5
		
		provinces_to_highlight = {
			OR = {
				AND = {
					NOT = {
						central_jilin_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = central_jilin_area
				}
				AND = {
					NOT = {
						ilan_hala_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = ilan_hala_area
				}
				AND = {
					NOT = {
						furdan_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = furdan_area
				}
				AND = {
					NOT = {
						heilongjiang_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = heilongjiang_area
				}
				AND = {
					NOT = {
						central_heilongjiang_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = central_heilongjiang_area
				}
				AND = {
					NOT = {
						east_heilongjiang_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = east_heilongjiang_area
				}
				AND = {
					NOT = {
						ningguta_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = ningguta_area
				}
				AND = {
					NOT = {
						jilin_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = jilin_area
				}
				AND = {
					NOT = {
						liaoning_area = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					area = liaoning_area
				}
			}
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = end_manchuria_tooltip #hold a province in every Manchurian area

				central_jilin_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				ilan_hala_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				furdan_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				heilongjiang_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				central_heilongjiang_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				east_heilongjiang_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				liaoning_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				jilin_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				ningguta_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		
		effect = {
			add_adm_power = 50
			custom_tooltip = kor_end_manchu.tooltip
			hidden_effect = {
				every_owned_province = {
					limit = { region = manchuria_region }
					add_province_modifier = {
						name = "kor_conquest_manchuria"
						duration = 7300
					}
				}
			}
		}
	}
}

kor_military_missions = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = KOR
	}
	
	#duplicate of generic mission
	kor_build_army_mission = {
		icon = mission_build_up_to_force_limit
		position = 1
		required_missions = {  }
		trigger = {
			army_size_percentage = 1
		}
		effect = {
			add_country_modifier = {
				name = "thriving_arms_industry"
				duration = 9125 #25 years
			}
		}
	}
}

kor_military_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = KOR
	}
	has_country_shield = yes
		
	kor_harness_seokleon = {
		icon = mission_non-western_soldiers
		position = 2
		required_missions = { kor_build_army_mission }
		trigger = {
			custom_trigger_tooltip = {
				tooltip = have_at_least_10_more_discipline
				has_global_modifier_value = {
					which = discipline
					value = 0.1
				}
			}
		}
		effect = {
			capital_scope = { add_base_manpower = 1 }
			create_general = {
				tradition = 80
			}
		}
	}
	kor_expand_hwacha = {
		icon = mission_asian_cannon
		position = 3
		required_missions = { kor_harness_seokleon }
		trigger = {
			num_of_artillery = 10
			artillery_fraction = 0.35
			num_of_owned_provinces_with = {
				value = 5
				OR = {
					has_building = regimental_camp
					has_building = conscription_center
				}
			}
		}
		effect = {
			add_mil_power = 50
			add_country_modifier = {
				name = hwacha_firepower_bonus
				duration = 7300
			}
		}
	}
}

korea_conquer_china_group = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	kor_control_yellow_sea = {
		icon = mission_galleys_in_port
		required_missions = { kor_seize_southern_manchuria }
		position = 4
		
		provinces_to_highlight = {
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						OR = {
							area = hebei_area
							area = south_hebei_area
							area = shandong_area
							area = south_shandong_area
						}
						value = 12
					}
				}
			}
			OR = {
				area = hebei_area
				area = south_hebei_area
				area = shandong_area
				area = south_shandong_area
			}
			NOT = { owned_by = ROOT }
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = kor_china_yellow_sea_tooltip
				num_of_owned_provinces_with = {
					OR = {
						area = hebei_area
						area = south_hebei_area
						area = shandong_area
						area = south_shandong_area
					}
					value = 12
				}
			}
		}
		
		effect = {
			735 = {
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 30
					key = kor_yellow_sea					
				}
			}
			1816 = {
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 30
					key = kor_yellow_sea					
				}
			}
			
			north_china_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_jiangsu_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_anhui_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			zhejiang_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_zhejiang_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	kor_seize_celestial_throne = {
		icon = mission_kowtow
		required_missions = { kor_control_yellow_sea }
		position = 5
		
		provinces_to_highlight = {
			if = {
				limit = {
					ROOT = {
						NOT = { has_dlc = "Mandate of Heaven" }
					}
				}
				OR = {
					AND = {
						province_id = 1816
						NOT = { owned_by = ROOT }
						NOT = { is_core = ROOT }
					}
					AND = {
						province_id = 1821
						NOT = { owned_by = ROOT }
						NOT = { is_core = ROOT }
					}
					AND = {
						ROOT = {
							NOT = {
								num_of_owned_provinces_with = {
									superregion = china_superregion
									value = 45
								}
							}
						}
						superregion = china_superregion
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						ROOT = { is_emperor_of_china = yes }
					}
				}
				owner = {
					is_emperor_of_china = yes
				}
				is_capital = yes
			}
			else = {
				always = no
			}
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = kor_moh_mission_tooltip
				if = {
					limit = {
						has_dlc = "Mandate of Heaven"
					}
					OR = {
						is_emperor_of_china = yes
						AND = {
							NOT = {
								any_country = {
									is_emperor_of_china = yes
								}
							}
							owns_core_province = 1816
							owns_core_province = 1821
							num_of_owned_provinces_with = {
								superregion = china_superregion
								value = 45
							}
						}
					}
				}
				else = {
					owns_core_province = 1816
					owns_core_province = 1821
					num_of_owned_provinces_with = {
						superregion = china_superregion
						value = 45
					}
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = kor_emperor_of_china
				duration = 7300
			}

			china_superregion = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

kor_diplo_missions = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	kor_befriend_ming = {
		icon = mission_noble_council
		required_missions = {  }
		trigger = {
			custom_trigger_tooltip = {
				tooltip = kor_befriend_mission_tooltip
				if = {
					limit = {
						has_dlc = "Mandate of Heaven"
					}
					OR = {
						any_country = {
							is_emperor_of_china = yes
							OR = {
								has_opinion = {
									who = ROOT
									value = 175
								}
								AND = {
									OR = {
										has_opinion_modifier = {
											who = ROOT
											modifier = insulted
										}
										has_opinion_modifier = {
											who = ROOT
											modifier = scornfully_insulted
										}
									}
									custom_trigger_tooltip = {
										tooltip = is_rivalled_by_root
										ROOT = { is_rival = prev }
									}
								}
							}
						}
						is_emperor_of_china = yes
						NOT = {
							any_country = {
								is_emperor_of_china = yes
							}
						}
					}
				}
				else = {
					OR = {
						AND = {
							exists = MNG
							OR = {
								MNG = {
									has_opinion = {
										who = ROOT
										value = 175
									}
								}
								AND = {
									is_rival = MNG
									MNG = {
										OR = {
											has_opinion_modifier = {
												who = ROOT
												modifier = insulted
											}
											has_opinion_modifier = {
												who = ROOT
												modifier = scornfully_insulted
											}
										}
									}
								}
							}
						}
						AND = {
							NOT = {
								exists = MNG
							}
							owns = 1816
						}
					}
				}
			}
		}
		effect = {
			add_dip_power = 50
			add_country_modifier = {
				name = kor_chinese_patronage
				duration = 7300
			}
		}
	}
}


kor_fortify_missions = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = KOR
	}
	has_country_shield = yes
	
	kor_fortify_korea = {
		icon = mission_great_wall
		position = 2
		required_missions = { kor_build_army_mission }

		provinces_to_highlight = {
			OR = {
				province_id = 2744
				province_id = 4232
				province_id = 6471
				province_id = 2742
				province_id = 6472
			}
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = kor_fort_mission_tooltip
				any_owned_province = {
					OR = {
						province_id = 2744
						province_id = 4232
						province_id = 6471
						province_id = 2742
						province_id = 6472
					}
					OR = {
						has_building = fort_16th
						has_building = fort_17th
						has_building = fort_18th
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					NOT = {
						any_owned_province = {
							OR = {
								province_id = 2744
								province_id = 4232
								province_id = 6471
								province_id = 2742
								province_id = 6472
							}
							OR = {
								has_building = fort_16th
								has_building = fort_17th
								has_building = fort_18th
							}
						}
					}
				}
				custom_tooltip = kor_fortify_korea_tooltip
			}
			else = {
				random_owned_province = {
					limit = {
						OR = {
							province_id = 2744
							province_id = 4232
							province_id = 6471
							province_id = 2742
							province_id = 6472
						}
						OR = {
							has_building = fort_16th
							has_building = fort_17th
							has_building = fort_18th
						}
					}
					add_province_modifier = {
						name = kor_built_the_wall
						duration = -1
					}
					add_base_manpower = 2
				}
			}
		}
	}
	kor_fortify_korea_2 = {
		icon = mission_conquer_50_development
		position = 3
		required_missions = { kor_fortify_korea }
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				has_building = fort_18th
			}
		}
		effect = {
			add_country_modifier = {
				name = kor_built_the_wall_2
				duration = -1
			}
		}
	}
}

kor_righteous_army_tree = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	kor_righteous_army = {
		icon = mission_assemble_an_army
		position = 1
		required_missions = {  }

		trigger = {
			any_country = {
				war_with = ROOT
				army_strength = {
					who = ROOT
					value = 1.5
				}
			}
		}
		effect = {
			add_yearly_manpower = 1.5
		}
	}
}

kor_japan_tree = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	kor_japanese_piracy = {
		icon = mission_establish_high_seas_navy
		position = 2
		required_missions = {  }

		trigger = {
			num_of_heavy_ship = 5
			num_of_galley = 35
		}
		effect = {
			create_admiral = {
				tradition = 60
			}
			
			kyushu_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			central_kyushu_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			1018 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			4183 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			5506 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			1818 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			4182 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			3313 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			3316 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			4651 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}

	kor_foothold_in_japan = {
		icon = mission_invade_island
		position = 3
		required_missions = { kor_japanese_piracy }
		
		provinces_to_highlight = {
			OR = {
				province_id = 1018
				province_id = 4183
				province_id = 5506
				province_id = 1818
				province_id = 4182
				province_id = 3316
				province_id = 3313
				area = kyushu_area
				area = central_kyushu_area
			}
			NOT = { owned_by = ROOT }
		}

		trigger = { #Note: not including 4651 is deliberate as that small island is hardly a "foothold" in Japan.
			custom_trigger_tooltip = {
				tooltip = kor_foothold_japan_tooltip
				num_of_owned_provinces_with = {
					value = 4
					OR = {
						province_id = 1018
						province_id = 4183
						province_id = 5506
						province_id = 1818
						province_id = 4182
						province_id = 3316
						province_id = 3313
						area = kyushu_area
						area = central_kyushu_area
					}
				}
			}
		}
		effect = {
			add_dip_power = 50
			
			shikoku_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			saigoku_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			sanindo_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			northern_kyushu = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			kyushu_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			kinai_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			central_kyushu_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			btc_south_kyushu_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_sanyodo_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_kinai_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	kor_defeat_shogun = {
		icon = mission_japanese_samurai
		position = 5
		required_missions = { kor_foothold_in_japan }
		
		provinces_to_highlight = {
			province_id = 1020
		}

		trigger = {
			owns = 1020 #Kyoto
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Mandate of Heaven"
					is_harmonizing_with = shinto
				}
				add_harmonization_progress = 15
			}

			country_event = { id = flavor_kor.7 }

			japan_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
					is_city = yes
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

kor_turtle_ships_tree = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	kor_turtle_ships = {
		icon = mission_junk_boat
		position = 3
		required_missions = { kor_japanese_piracy }

		trigger = {
			has_global_modifier_value = {
				which = ship_durability
				value = 0.15
			}
		}
		effect = {
			add_country_modifier = {
				name = kor_turtle_fleets
				duration = 7300
			}
		}
	}
}


kor_settle_land = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	kor_settle_north = {
		icon = mission_rice_field
		position = 4
		required_missions = {  }
		
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 2742
					NOT = { culture = korean }
				}
				AND = {
					province_id = 6471
					NOT = { culture = korean }
				}
				AND = {
					province_id = 2743
					NOT = { culture = korean }
				}
			}
		}

		trigger = {
			2742 = {
				culture = korean
			}
			2743 = {
				culture = korean
			}
			6471 = {
				culture = korean
			}
		}
		effect = {
			add_prestige_or_monarch_power = { amount = 5 }
			add_dip_power = 25
		}
	}
	kor_settle_general = {
		icon = mission_colonial
		position = 5
		required_missions = { kor_settle_north }
		
		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { culture = korean }
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 55
				culture = korean
			}
		}
		effect = {
			add_prestige_or_monarch_power = { amount = 25 }
			add_dip_power = 50
		}
	}
}


kor_harmony_with_japan = {
	slot = 5
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Mandate of Heaven"
	}
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
		has_dlc = "Mandate of Heaven"
	}
	has_country_shield = yes
	
	kor_harmonise_shinto = {
		icon = mission_hands_praying
		position = 6
		required_missions = { kor_defeat_shogun }

		trigger = {
			if = {
				limit = {
					religion = confucianism
				}
				has_harmonized_with = shinto
			}
			else = {
				japan_region = {
					type = all
					OR = {
						religion = ROOT
						is_city = no
					}
				}
			}
		}
		effect = {
			add_stability_or_adm_power = yes
		}
	}
}

korea_economic_social_political_path_0 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = KOR
	}
	
	kor_higher_income = {
		icon = mission_high_income
		required_missions = {  }
		position = 4
		
		trigger = {
			treasury = 500
			share_of_starting_income = 2
		}
		
		effect = {
			add_country_modifier = {
				name = "kor_growing_economy"
				duration = 7300 #20 years 
			}
		}
	}
}

korea_economic_social_political_path_1 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = KOR
	}
	has_country_shield = yes

	kor_peasant_struggles = {
		icon = mission_rice_field
		required_missions = { kor_higher_income }
		position = 6

		provinces_to_highlight = {
			region = korea_region
			NOT = { development = 6 }
		}
		
		trigger = {
			korea_region = {
				type = all
				development = 6
			}
		}
		
		effect = {
			add_stability = 1
			if = {
				limit = {
					NOT = {
						has_country_flag = kor_peasant_struggles
					}
				}
				custom_tooltip = kor_peasant_struggles_mission_tt1
				hidden_effect = {
					set_country_flag = kor_peasant_struggles_resolved
				}
			}
			else_if = {
				limit = {
					has_country_modifier = kor_peasant_struggles
				}
				remove_country_modifier = kor_peasant_struggles
				custom_tooltip = kor_peasant_struggles_mission_tt2
				hidden_effect = {
					set_country_flag = kor_peasant_struggles_resolved
				}
			}
			else = {
				add_legitimacy = 15
			}
		}
	}
	kor_develop_korea = {
		icon = mission_have_manufactories
		required_missions = { kor_peasant_struggles }
		position = 7
		
		trigger = {
			development_in_provinces = {
				value = 360
				region = korea_region
			}
		}
		
		effect = {
			korea_region = {
				limit = { owned_by = ROOT }
				add_province_modifier = {
					name = kor_prosperous_korea
					duration = 7300
				}
			}
		}
	}
	kor_achieve_juche = {
		icon = mission_asian_city
		required_missions = { kor_develop_korea kor_develop_capital kor_end_factional_strife }
		position = 8
		
		provinces_to_highlight = {
			region = korea_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				NOT = { culture = korean }
				NOT = { development = 10 }
				has_manufactory_trigger = no
			}
		}
		
		trigger = {
			is_subject = no
			
			korea_region = {
				type = all
				owned_by = ROOT
				is_core = ROOT
				culture = korean
				development = 10
				has_manufactory_trigger = yes
			}
			army_size = 100
			army_size_percentage = 1
			stability = 3
			legitimacy_equivalent = 95
			prestige = 95
			religious_unity = 0.9
			NOT = { corruption = 1 }
		}
		
		effect = {
			add_country_modifier = {
				name = korea_in_balance
				duration = -1
			}
		}
	}
}

korea_economic_social_political_path_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = KOR
	}
	has_country_shield = yes
	
	kor_develop_capital = {
		icon = mission_early_game_buildings
		required_missions = { kor_peasant_struggles }
		position = 7
		
		provinces_to_highlight = {
			is_capital_of = ROOT
		}

		trigger = {
			capital_scope = {
				culture = korean
				development = 35
			}
		}
		
		effect = {
			add_country_modifier = {
				name = kor_developed_capital
				duration = 7300
			}
		}
	}
}


korea_economic_social_political_path_3 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = KOR
	}
	has_country_shield = yes
	kor_end_factional_strife = {
		icon = mission_scholar_officials
		required_missions = { kor_peasant_struggles }
		position = 7
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = KOR_has_factional_upheaval_tooltip
				has_country_modifier = kor_factional_upheaval
			}
			custom_trigger_tooltip = {
				tooltip = KOR_has_factional_upheaval_tooltip2
				has_country_flag = kor_third_literati_purge
			}
			OR = {
				custom_trigger_tooltip = {
					tooltip = have_no_estate_land_tooltip #No §Yestates§! have any §Yterritory§!.
					OR = {
						AND = {
							NOT = { has_estate = estate_nobles }
							NOT = { has_estate = estate_burghers }
							NOT = { has_estate = estate_church }
						}
						NOT = {
							any_owned_province = {
								OR = {
									has_estate = estate_nobles
									has_estate = estate_burghers
									has_estate = estate_church
								}
							}
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = KOR_two_pleased_estates_tooltip #Two §Yestates§! have at least §Y70 loyalty§!, the other has at least §Y50 loyalty§!.
					OR = {
						AND = {
							estate_loyalty = {
								estate = estate_burghers
								loyalty = 70
							}
							estate_loyalty = {
								estate = estate_church
								loyalty = 70
							}
							estate_loyalty = {
								estate = estate_nobles
								loyalty = 50
							}
						}
						AND = {
							estate_loyalty = {
								estate = estate_burghers
								loyalty = 70
							}
							estate_loyalty = {
								estate = estate_nobles
								loyalty = 70
							}
							estate_loyalty = {
								estate = estate_church
								loyalty = 50
							}
						}
						AND = {
							estate_loyalty = {
								estate = estate_church
								loyalty = 70
							}
							estate_loyalty = {
								estate = estate_nobles
								loyalty = 70
							}
							estate_loyalty = {
								estate = estate_burghers
								loyalty = 50
							}
						}
						AND = {
							has_parliament = yes
							estate_loyalty = {
								estate = estate_church
								loyalty = 70
							}
							estate_loyalty = {
								estate = estate_burghers
								loyalty = 70
							}
						}
					}
				}
            }
        }
		
		effect = {
			if = {
				limit = {
					AND = {
						NOT = { has_estate = estate_nobles }
						NOT = { has_estate = estate_burghers }
						NOT = { has_estate = estate_church }
					}
				}
				add_stability_or_adm_power = yes
			}
			else = {
				hidden_effect = {
					remove_country_modifier = kor_factional_upheaval
					add_estate_loyalty_modifier = {
						estate = estate_nobles
						desc = EST_KOR_FACTIONAL_UNITY
						loyalty = 15
						duration = 7300
					}
					add_estate_loyalty_modifier = {
						estate = estate_church
						desc = EST_KOR_FACTIONAL_UNITY
						loyalty = 15
						duration = 7300
					}
					add_estate_loyalty_modifier = {
						estate = estate_burghers
						desc = EST_KOR_FACTIONAL_UNITY
						loyalty = 15
						duration = 7300
					}
				}
				custom_tooltip = kor_end_factional_strife_tt
			}
		}
	}
}

korea_trade_group = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = KOR
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	kor_korean_trade_ports = {
		icon = mission_dominate_home_trade_node
		required_missions = {  }
		position = 6

		provinces_to_highlight = {
			province_id = 2745
			NOT = { owned_by = ROOT }
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 8
				OR = {
					has_building = marketplace
					has_building = trade_depot
					has_building = stock_exchange
				}
			}
			owns = 2745
		}
		effect = {
			2745 = {
				add_base_production = 2
			}
			1389 = {
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 30
					key = kor_traders_tm
				}
			}
			1390 = {
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 30
					key = kor_traders_tm
				}
			}
		}
	}

	kor_japanese_trade = {
		icon = mission_market_place_with_asian_traders
		required_missions = { kor_korean_trade_ports }
		position = 7

		provinces_to_highlight = {
			OR = {
				province_id = 1390
				province_id = 1389
			}
		}

		trigger = {
			1389 = {
				trade_share = {
					country = ROOT
					share = 65
				}
			}
			1390 = {
				trade_share = {
					country = ROOT
					share = 20
				}
			}
		}

		effect = {
			add_country_modifier = {
				name = kor_mission_traders
				duration = 7300
			}
		}
	}
}
